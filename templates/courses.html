{% extends 'base.html' %}
{% block title %}Cursos - Escuela Silviano Matamoros{% endblock %}

{% block content %}
<section class="container-max px-4 py-16">
  <h2 class="text-4xl font-extrabold text-center mb-12 text-azulescuela dark:text-doradoescuela" data-aos="fade-up">
    Nuestros Cursos{% if categoria %} - {{ categoria }}{% endif %}
  </h2>

  <!-- Filtros -->
  <div class="flex flex-wrap justify-center gap-4 mb-12" data-aos="fade-up" data-aos-delay="100">
    {% set categorias = ['Todos', 'Ciencias', 'Arte', 'General'] %}
    {% for cat in categorias %}
      {% if cat == 'Todos' %}
        <a href="/cursos" class="bg-azulescuela text-white py-2 px-5 rounded-full font-semibold shadow hover:bg-doradoescuela hover:text-azulescuela transition">{{ cat }}</a>
      {% else %}
        <a href="/cursos?categoria={{ cat }}" class="bg-azulescuela text-white py-2 px-5 rounded-full font-semibold shadow hover:bg-doradoescuela hover:text-azulescuela transition">{{ cat }}</a>
      {% endif %}
    {% endfor %}
  </div>

  <!-- Cursos -->
  <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-8">
    {% for curso in cursos %}
    <article 
      class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden transform transition duration-300 hover:-translate-y-1 hover:shadow-2xl" 
      data-aos="fade-up" 
      data-aos-delay="{{ loop.index * 70 }}"
    >
      <div class="overflow-hidden relative">
        <img 
        src="{{ curso.imagen | safe }}" 
        alt="{{ curso.nombre }}" 
        class="w-full h-44 object-cover transition-transform duration-300 hover:scale-105" 
        loading="lazy"
        onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1581091012184-5a2c7a95b7b1?auto=format&fit=crop&w=800&q=80';"
      />
      
        <div class="absolute inset-0 bg-black/30 opacity-0 hover:opacity-100 transition duration-300 flex items-center justify-center">
          <a href='/curso/{{ curso.nombre | urlencode }}' class="bg-doradoescuela text-azulescuela font-bold px-4 py-2 rounded-full shadow hover:bg-yellow-400 transition">Ver m√°s</a>
        </div>
      </div>

      <div class="p-5">
        <h3 class="text-lg font-bold text-azulescuela dark:text-doradoescuela mb-2">{{ curso.nombre }}</h3>
        <p class="text-gray-700 dark:text-gray-300 text-sm mb-4 leading-snug">{{ curso.descripcion_corta }}</p>
        <div class="flex justify-between items-center text-sm text-gray-500 dark:text-gray-400">
          <span class="italic">Inicio: {{ curso.fecha_inicio }}</span>
          <a href="/curso/{{ curso.nombre | urlencode }}" class="text-doradoescuela font-semibold hover:underline">Detalles</a>
        </div>
      </div>
    </article>
    {% endfor %}
  </div>
</section>
{% endblock %}
